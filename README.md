# app-boilerplate [![NPM version](https://badge.fury.io/js/app-boilerplate.svg)](http://badge.fury.io/js/app-boilerplate)

> Boilerplate for creating a node.js application based on Template, vinyl and orchestrator. This consists of the core, generalized components of assemble, verb and generate.

## Features

This has the core components of [verb] and [assemble], and [generate]. You can use it to build your own application too. It comes with a fully-functional CLI and API for running tasks, plugins, routes and middleware, including the following:

* **tasks/plugins**: gulp-style tasks and support for vinyl plugins (gulp, verb, assemble). Session caching is also used to allow context to be passed from one task to another.
* **engines**: ability to render templates from any template engine.
* **middleware**: for priming the `file` object with default properties, like `data`
* **routes**: for running the default middleware at specific points in the plugin pipeline

The goal with this project is to generalize the core functionality used a

## Table of contents

<!-- toc -->

* [Install](#install)
* [Usage](#usage)
  - [Running tasks](#running-tasks)

* [CLI](#cli)
* [API](#api)
* [Related projects](#related-projects)
* [Running tests](#running-tests)
* [Contributing](#contributing)
* [Author](#author)
* [License](#license)

_(Table of contents generated by [verb])_

<!-- tocstop -->

## Install

Install with [npm](https://www.npmjs.com/)

```bash
npm i app-boilerplate --save
```

## Usage

```js
var app = require('app-boilerplate');
```

### Running tasks

Since this library uses orchestrator and vinyl, tasks have the same API as [gulp]:

```js
app.task('default', function() {
  app.src('vendor/*.js')
    .pipe(app.src('dist'));
});
```

**Tasks with plugins**

```js
var one = require('plugin-one');
var two = require('plugin-two');

app.task('default', function() {
  app.src('vendor/*.js')
    .pipe(one())
    .pipe(two())
    .pipe(app.src('dist'));
});
```

## CLI

> Persist, get and update config values

**Set**

Set a value on `app.config.cache`:

```sh
$ app --set foo=bar
# {config: {cache: {foo: 'bar'}}}

$ app --set baz
# {config: {cache: {baz: true}}}
```

## API

### [.src](index.js#L45)

Glob patterns or filepaths to source files.

**Params**

* `glob` **{String|Array}**: Glob patterns or file paths to source files.
* `options` **{Object}**: Options or locals to merge into the context and/or pass to `src` plugins

**Example**

```js
app.src('src/*.hbs', {layout: 'default'})
```

### [.dest](index.js#L61)

Specify a destination for processed files.

**Params**

* `dest` **{String|Function}**: File path or rename function.
* `options` **{Object}**: Options to `dest` plugins

**Example**

```js
app.dest('dist', {ext: '.xml'})
```

### [.copy](index.js#L80)

Copy a `glob` of files to the specified `dest`.

**Params**

* `glob` **{String|Array}**
* `dest` **{String|Function}**
* `returns` **{Stream}**: Stream, to continue processing if necessary.

**Example**

```js
app.task('assets', function() {
  app.copy('assets/**', 'dist');
});
```

### [.task](index.js#L99)

Define a App task.

**Params**

* `name` **{String}**
* `fn` **{Function}**

**Example**

```js
app.task('docs', function() {
  app.src(['.app.md', 'docs/*.md'])
    .pipe(app.dest('./'));
});
```

### [.getTask](index.js#L115)

Get the name of the current task-session. This is used in plugins to lookup data or views created in a task.

* `returns` **{String}** `task`: The name of the currently running task.

**Example**

```js
var id = app.getTask();
var views = app.views[id];
```

### [.getCollection](index.js#L135)

Get a view collection by its singular-form `name`.

* `returns` **{String}** `name`: Singular name of the collection to get

**Example**

```js
var collection = app.getCollection('page');
// gets the `pages` collection
//=> {a: {}, b: {}, ...}
```

### [.getFile](index.js#L159)

Get a file from the current session.

* `returns` **{Object}** `file`: Vinyl file object. Must have an `id` property.

**Example**

```js
var file = app.getFile(file);
```

### [.pushToStream](index.js#L176)

Get a template from the current session, convert it to a vinyl file, and push it into the stream.

**Params**

* `stream` **{Stream}**: Vinyl stream
* `id` **{String}**: Get the session `id` using `app.getTask()`

**Example**

```js
app.pushToStream(file);
```

### [.taskFiles](index.js#L193)

`taskFiles` is a session-context-specific getter that returns the collection of files from the currently running `task`.

* `returns` **{Object}**: Get the files from the currently running task.

**Example**

```js
var taskFiles = app.taskFiles;
```

### [.watch](index.js#L246)

Re-run the specified task(s) when a file changes.

**Params**

* `glob` **{String|Array}**: Filepaths or glob patterns.
* `fn` **{Function}**: Task(s) to watch.

**Example**

```js
app.task('watch', function() {
  app.watch('docs/*.md', ['docs']);
});
```

## Related projects

* [assemble](http://assemble.io): Static site generator for Grunt.js, Yeoman and Node.js. Used by Zurb Foundation, Zurb Ink, H5BP/Effeckt,… [more](http://assemble.io)
* [generate](https://github.com/generate/generate): Project generator, for node.js.
* [template](https://github.com/jonschlinkert/template): Render templates using any engine. Supports, layouts, pages, partials and custom template types. Use template… [more](https://github.com/jonschlinkert/template)
* [verb](https://github.com/assemble/verb): Documentation generator for GitHub projects. Extremely powerful, easy to use, can generate anything from API… [more](https://github.com/assemble/verb)

## Running tests

Install dev dependencies:

```bash
npm i -d && npm test
```

## Contributing

Pull requests and stars are always welcome. For bugs and feature requests, [please create an issue](https://github.com/jonschlinkert/app-boilerplate/issues)

## Author

**Jon Schlinkert**

+ [github/jonschlinkert](https://github.com/jonschlinkert)
+ [twitter/jonschlinkert](http://twitter.com/jonschlinkert)

## License

Copyright (c) 2015 Jon Schlinkert
Released under the MIT license.

***

_This file was generated by [verb-cli](https://github.com/assemble/verb-cli) on May 07, 2015._

[assemble]: http://assemble.io
[consolidate]: https://github.com/visionmedia/consolidate.js
[engines]: https://github.com/assemble/engines
[template]: https://github.com/jonschlinkert/template
[verb]: https://github.com/assemble/verb
